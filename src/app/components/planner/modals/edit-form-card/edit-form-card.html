<form [formGroup]="editForm" (ngSubmit)="onSubmit()" method="post">
    <div class="container-fluid h-100 mt-2" style="background-color: #E4D8D8;">
        <div class="row mt-2">
            <div class="form-group col-12 py-2">
                <label for="taskName">Name</label>
                <input class="form-control" type="text" id="taskName" formControlName="taskName"/>
            </div>
            <div class="form-group col-12 py-2">
                <label for="userTask">Assigned To</label>
                <select class="form-control" id="userTask" formControlName="assignedTo" [compareWith]="compareUsers">
                    <option value="">--Choose a user for the task--</option>
                    @for (u of users(); track u.id) {
                        <option [value]="u">{{ u.email }}</option>
                    } @empty {
                        <option>No users are available</option>
                    }
                </select>
            </div>
            <div class="col-4 ms-auto py-2">
                <span>Priority</span>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="low" formControlName="priority" value="Low" checked />
                    <label class="form-check-label" for="low">Low</label>                   
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="medium" formControlName="priority" value="Medium" />
                    <label class="form-check-label" for="medium">Medium</label>                
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="high" formControlName="priority" value="High" />
                    <label class="form-check-label" for="high">High</label>
                </div>
            </div>
            <div class="form-group ms-auto py-2">
                <label for="attachments">Attachments</label>
                <input class="form-control-file" type="file" id="fileInput" formControlName="attachments" />
                @for (attach of task().attachments || []; track attach.id) {
                    <small class="row gap-1">{{ attach.name }}</small>
                } @empty {
                    <small class="alert-danger">No attachments yet.</small>
                }
            </div>
            <div class="form-group ms-auto py-2">
                <label for="description">Description</label>
                <textarea 
                    class="form-control"
                    rows="5" 
                    id="description" 
                    formControlName="description" 
                    style="background-color: #CEC4C4;">
                </textarea>
            </div>
            <div class="row mt-3">
                <div class="col-12 text-end pb-3">
                    <button type="button" class="btn btn-secondary me-2" (click)="activeModal.dismiss()">Cancel</button>
                    <button type="submit" class="btn btn-success" [disabled]="editForm.invalid">Save changes</button>
                </div>
            </div>
        </div>
    </div>
</form>